---
title: Clickable Mobile Content to SMS
level1: Solutions
level2: Channels
level3: SMS with LiveEngage

permalink: sms-with-liveengage-clickable-mobile-content-to-sms.html
order: 20
indicator:
---

### Overview

Within LiveEngage lies the capability to generate an SMS clickable mobile content campaign. This content can be generated by a targeted mobile campaign, and further by device type (Android, iOS). Visitors on a brand’s website can now click the content and begin an SMS conversation with the brand.

<div style="display: block; position: relative; max-width: 70%;margin:0 auto;"><div style="padding-top: 56.25%;"><iframe src="//players.brightcove.net/902047215001/default_default/index.html?videoId=5330861932001" allowfullscreen webkitallowfullscreen mozallowfullscreen style="width: 100%; height: 100%; position: absolute; top: 10px; bottom: 0px; right: 0px; left: 0px;"></iframe></div></div>

### Configuration

#### Step 1: Create a new campaign

1. Log into your LiveEngage account.

2. Create a **new campaign** specifically for SMS content engagements and set a meaningful name.

3. Under Target Audience, change the target **Platform** to **Mobile Smartphone** - the SMS link will not function on desktop.

4. Create a new content engagement. You will need to **create a set of two engagements**: one for iOS and another for Android. The best naming practice is <CONTENT_NAME>_ios and <CONTENT_NAME>_android. Set the following parameters:

    a. Source: Web
    
    b. Channel: Content
    
    c. Format: Overlay or an embedded format, but it must be an **HTML Engagement**. This is important for setting the SMS link.
    
    d. On-click action: None

5. Move to the next step: Engagement studio.

#### Step 2: Edit the engagement

Use the following code template for your engagement. The capitalized portions should be replaced.

**iOS CODE**

```html
<div>
  <a href="sms://+SMS_NUMBER_WITH_COUNTRY_CODE&body=TEXT_MESSAGE_URI_ENCODED" data-LP-event="click">
    <CALL_TO_ACTION>
  </a>
  <a style="position:absolute; top:0px; left:0px; z-index:9999;" href="#" data-LP-event="close">
    <img src="https://lpcdn.lpsnmedia.net/gallery/libraries/content/close_icons/blue_white.png">
  </a>
</div>
```

**ANDROID CODE**

```html
<div>
  <a href="sms://+SMS_NUMBER_WITH_COUNTRY_CODE?body=TEXT_MESSAGE_URI_ENCODED" data-LP-event="click">
    <CALL_TO_ACTION>
  </a>
  <a style="position:absolute; top:0px; left:0px; z-index:9999;" href="#" data-LP-event="close">
    <img src="https://lpcdn.lpsnmedia.net/gallery/libraries/content/close_icons/blue_white.png">
  </a>
</div>
```

<table>
<thead>
  <tr>
    <th>Element</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>SMS_NUMBER_WITH_COUNTRY_CODE</td>
    <td>The LiveEngage enabled SMS number. Be sure to include the country code.</td>
  </tr>
  <tr>
    <td>TEXT_MESSAGE_URI_ENCODED</td>
    <td>The message inserted into the body of the text message. It needs to be URI encoded. Use this site http://meyerweb.com/eric/tools/dencoder/<br>
    Note: separate the number and text with:<br>
    an '&' for iOS<br>
    a '?' for Android</td>
  </tr>
  <tr>
    <td>CALL_TO_ACTION</td>
    <td>Can be an image, text, any HTML that is the visual representation of the engagement. See example below which uses an overlay image.</td>
  </tr>
</tbody>
</table>


Example (_iOS_):

```html
<div>
<a href="sms://+12062021280&body=Hello%20fashion%20consultant!%20Here%20is%20my%20question%3A%20">
<img style="width:250px; height:auto;" src="https://chrisjamestest.neocities.org/img/bigbag-clicktomessage.png">
</a>
</div>
```

![Clickable SMS](img/clickablesms.png)

### Ensuring the best consumer experience

In order to ensure that responses from a brand are received by the consumer in the same thread, the brand needs to ensure that the initial text be sent to a full format number e.g. +1(000) 000-0000. Numbers cannot be in toll free number format, otherwise the thread will break.

Notice the use of:

·  	The + sign

·  	The country code: 1

·  	Brackets around the area code (000)

·  	Dash between the final two number groups 000-0000

#### Step 3: Create an Entry Point

In the Entry Point section, create two new Entry Points for BRAND_iOS and BRAND_Android (where BRAND is the name of the website of section of the site you want the button to display).

Assign the correct Entry Point to your engagement

iOS example:

## ![Edit Location](img/clickable1.png)

#### Step 4: Add a Behavior

A "Time on Entry Point" behavior may utilize the new entry points you've just created. Otherwise "All Behaviors" will be fine.

Save and publish your engagements. They will not display until you've added the necessary Entry Point *Section* attribute on your website.

#### Step 5: Add code to the consumer web page

In order for your Entry Points to work, you need code on your website to tell LiveEngage which Entry Point the visitor is on.

Add the following code to your website to detect which mobile Operating System (OS) the visitor is using. This way the visitor will see the correct engagement with the correct SMS link for their OS. For a full explanation on section variables please see this [article](https://liveengage.liveperson.net/a/new/?connectionOpenArticle=engagement-attributes-overview){:target="_blank"}.

```javascript
<script>
var getMobileOperatingSystem = function() {
 var userAgent = navigator.userAgent || navigator.vendor || window.opera;
 if (/windows phone/i.test(userAgent)) {
       return "Windows Phone";
 }
 if (/android/i.test(userAgent)) {
       return "Android";
 }
 if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
       return "iOS";
 }
   return "unknown";
};
lpTag.section = [
   "BRAND_"+getMobileOperatingSystem().toLowerCase()
];
</script>
```

You can add this code globally if BRAND is simply the name of your website, or to a grouping of pages if BRAND is a certain area of your site.

Once this code is implemented, your new engagements will begin to display.

#### Step 6: Opt-in Privacy Notice (optional)

It is possible to also include an opt in message prior to opening the SMS application, which makes sure the consumer agrees to receiving texts through the LivePerson system.

The goal is to add an additional view within the LiveEngage content engagement, which will contain the disclaimer and the actual SMS link to the conversation.

1. Go to the SMS content engagements campaign and click "Add Engagement".

2. Under "Channel" choose “Content”.

3. Under "Format" choose “Overlay”

4. Click HTML Engagement and click next to get to the Engagement Studio.

5. In the Engagement Studio use the HTML engagement content example below and paste into the HTML code box with the correct information in the highlighted areas.

    1.  See the below example of the HTML engagement content.

```html  
<div>
  <a style="position:absolute; top:-10px; left:-10px; z-index:9999;" href="#" data-LP-event="close"><img src="https://lpcdn.lpsnmedia.net/gallery/libraries/content/close_icons/blue_white.png"></a>
    <div id="contact-main">
      <CALL_TO_ACTION>
    </div>
  <div id="agreement" style="background-color:white; padding: 10px; display:none; width:250px;">
      <p>YOUR_OPT_IN_MESSAGE</p><p>
    <a style="color:blue;" href="sms:+SMS_NUMBER_WITH_COUNTRY_CODE&body=TEXT_MESSAGE_URI_ENCODED">I Agree ›</a></p>
  </div>
</div>
```
As well on the consumer end, the following JavaScript onclick trigger needs to be added (can be added to the bottom of the browser detection code).

```javascript
<script>
 	$(document).on('click', "#contact-main", function(){
      	$('#contact-main').hide();
      	$('#agreement').show();
 	});
</script>
```

![Privacy Notice](img/clickable2.png)

#### Step 7: SMS invitation overlay hard-coded (optional)

This option is for providing the invitation outside of LiveEngage (example size set to size 250 x 200px). You will need to add code which **unhides** the outermost div `sms-modal` when you want the modal to appear. You will also need to use the browser detection code listed earlier to determine the format of the SMS link.

```css
.modal-centered{
 	width:250px;
 	height:200px;
 	position:absolute;
 	left:50%;
 	top:50%;
 	margin:-100px 0 0 -125px;
}
```

```html
<div id="sms-modal" class="modal-centered">
 <div style="cursor:pointer; position:absolute; top:-10px; left:-10px; z-index:9999;" onclick="$('#sms-modal').hide();" >
   <img src="https://lpcdn.lpsnmedia.net/gallery/libraries/content/close_icons/blue_white.png">
 </div>
 <div id="contact-main">
   <CALL_TO_ACTION>
 </div>
 <div id="agreement" style="background-color:#eee; padding: 10px; display:none; width:100%; height:100%;">
   <p>YOUR_OPT_IN_MESSAGE</p>
   <p><a style="color:blue;" href="sms:+SMS_NUMBER_WITH_COUNTRY_CODE&body=TEXT_MESSAGE_URI_ENCODED">I Agree ›</a></p>
 </div>
</div>
```
